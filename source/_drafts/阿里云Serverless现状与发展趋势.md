title: 阿里云Serverless现状与发展趋势
author: 孙琦(Ray)
date: 2021-03-04 07:48:06
tags:
---
阿里云的函数计算是我最早的接触的Serverless架构的相关服务，去年还特意在51CTO录制过一套视频课程，有兴趣的朋友可以去看一看。阿里云是国内云计算的先行者，在Serverless方面也是一样。在《Serverless发展历史》一文中我也曾经提到过，阿里云早在2016年就发布了自己的函数计算服务，仅比AWS Lambda仅仅晚了两年的时间。

之前一直没敢写阿里云Serverless还有一个很重要的原因，就是发现自己了解的内容太少了。我在写Serverless时，更多的是从开发者的角度来看。而每家公司对于自身Serverless往往有全局性和整体的规划，其中就有很多我们看不到的内容。最近这段时间，有幸结识了阿里云函数服务的负责团队，也听他们讲述了阿里云在Serverless上的总体规划，还是受益匪浅的，所以这篇Blog除了分析阿里云在开发者看的见的部分，也来让大家了解一下看不见的部分。

<!-- more -->

# 阿里云Serverless概述

阿里云Serverless的官方链接是：https://serverless.aliyun.com/
主要是对阿里云函数计算、Serverless平台以及应用场景进行了介绍，最后是完整的入门手册全面介绍函数计算。

从阿里云Serverless我们能了解到围绕在函数计算服务的生态服务。其中对象存储、API网关比较常见。日志服务便于函数计算服务的调试和跟踪。至于批量计算和函数计算的关系，我理解是批量计算调用函数计算，按量计费的方式，但是在控制台上并没有非常明显的入口或者提示。

![upload successful](/images/pasted-209.png)

另外，其实按照阿里云提供的Serverless能力来说，还应该包含Serverless容器服务ASK，Serverless应用引擎SAE以及用于函数计算编排的工作流服务。在阿里云的服务目录可以搜索到这些服务，但是在Serverless首页上并没有过多的去宣传这些服务和应用场景。

另外一部分在Serverless首页上提供的是函数计算的客户场景，并给出了相应的架构图和示例代码，有需要的可以直接使用代码测试。

![upload successful](/images/pasted-210.png)

另外我发现，虽然每一家云商对于Serverless概念定义主要还是从函数计算维度出发，但是从开发者社区推送的一些文章来看，对于使用Serverless方式构建的K8S往往也归纳到这个范畴内。所以后面我也会尝试分享一下我们自身SaaS部署过程中，对于Serverless的K8S的尝试和一些心得。

# 函数服务

从2020年到2021年，阿里云函数服务还是发生了很大的变化，与2020年相比，有不少好的功能增强。

## 触发器

我们还是先来看触发器，触发器的种类决定了函数计算应用场景的丰富程度，同时也加深了厂商绑定的可能性。这是2020年初的触发器截图：

![upload successful](/images/pasted-211.png)

这是2021年的触发器截图，通过对比，可以很明显看到函数服务在一年时间里，增加了五种触发器类型（API网关、loT、云监控、消息队列Kafaka和事件总线触发器）。

![upload successful](/images/pasted-212.png)

![upload successful](/images/pasted-213.png)

以云监控触发器为例，比如你的ECS由人为引起了重启，你可以触发你的函数计算去处理自动化运维操作。通过云监控中的事件进行触发配置，不过这里不太方便的一点，新的几个触发器配置起来都不太方便，都需要通过查询文档才能知道跳转到哪个平台进行关联性配置，用户体验方面有待提升。

![upload successful](/images/pasted-221.png)



# 函数计算在生产环境中的使用

目前阿里云函数计算作为我们生产环境的一部分，已经稳定运行了一年多的时间，通过对函数计算的使用，节约了线上系统的成本，研发人员在开发和维护时也更加方便。至少有三种业务场景使用到了函数计算：

* 提供二维码申请迁移产品License页面，用户提交申请后自动将请求转发至钉钉流程中
* 迁移SaaS产品中，自动进行License审批，通过函数计算服务提供了ReST API服务
* 通过函数计算作为路由转发层，对外向第三方系统提供REST API接口，作为接受请求的服务端，之后再将请求转发至多个系统中



![upload successful](/images/pasted-207.png)


![upload successful](/images/pasted-208.png)